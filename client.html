<html>
<head>
<title>Hands-on Prototype</title>
<script src="http://code.jquery.com/jquery-2.1.3.min.js" charset="utf-8"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://s3-ap-northeast-1.amazonaws.com/hideyypub/epoch.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
	$(function() {
		var socket = io.connect();
		var now = ((new Date()).getTime()/1000)|0;
		var chartdata = [ {label: 'data1', values: [ {time: now, y: 0}] } ];
		var chartInstance= $('#chart').epoch({
			type: 'time.line',
			data: chartdata,
			axes: ['left', 'right', 'bottom', 'top'],
			pixelRatio: 1
		});
		var nextData;
		socket.on('msg', function(record) {
			console.log(record);
			// push data into chart
			values = record.split(',');
			nextData = [{time: values[1], y: values[2] }];
			chartInstance.push(nextData);
			$('#rawdata').prepend('<p>' + record + '</p>');
		});

	});
</script>
<link rel="stylesheet" type="text/css" href="https://s3-ap-northeast-1.amazonaws.com/hideyypub/epoch.min.css">
</head>
<body class="epoch-theme-dark">
<center><h1>Realtime Dashboard</h1></center>
<hr>
<div id="chart" class="epoch category10" style="height: 200px;border:solid 1px #C0C0C0;"></div>
<div id="rawdata" class="epoch"></div>
<hr>
<div align="right">
<img width="150" height="65" src="https://s3-ap-northeast-1.amazonaws.com/hideyypub/jaws-ug-logo.png"><br>
</div>
</body>
</html>