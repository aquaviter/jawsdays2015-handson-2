<html>
<head>
<title>Hands-on Prototype</title>
<script src="http://code.jquery.com/jquery-2.1.3.min.js" charset="utf-8"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://s3-ap-northeast-1.amazonaws.com/hideyypub/epoch.min.js"></script>
<script src="https://s3-ap-northeast-1.amazonaws.com/hideyypub/vticker.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
	$(function() {
		var socket = io.connect();
		var now = ((new Date()).getTime()/1000)|0;
		var chartdata = [ {label: 'data1', values: [ {time: now, y: 0}] } ];
		var chartInstance= $('#chart').epoch({
			type: 'time.line',
			data: chartdata,
			axes: ['left', 'right', 'bottom'],
			pixelRatio: 1
		});
		var nextData;
		socket.on('msg', function(record) {
			console.log(record);
			// push data into chart
			//values = record.split(',');
			values = JSON.parse(record);
			nextData = [{time: values.timestamp, y: values.value }];
			chartInstance.push(nextData);
			//$('#rawdata').prepend('<center>' + record + '</center>');
			$('#rawdata').prepend($('<li />').append(record));
			$('#rawdata').vTicker({
				height: 180,
				animate: true
			});
		});

	});
</script>
<style>
div {
	margin-bottom: 20px;
	padding: 10px;
	font-family: 'Lato', serif;
	font-size: 24px;
}

</style>
<link rel="stylesheet" type="text/css" href="https://s3-ap-northeast-1.amazonaws.com/hideyypub/epoch.min.css">
<link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
</head>
<body class="epoch-theme-dark">
<div align="center"><img src="https://s3-ap-northeast-1.amazonaws.com/hideyypub/jawsdays2015handson-title.png"></div>
<div id="chart" class="epoch category20c" style="height: 200px;border:solid 5px #000000;"></div>
<div id="rawdata" style="height:200px;border:solid 5px #000000;">
<ul style="list-style:none;">	
</ul>
</div>
<br><br>
<div align="right">
<img width="150" height="200" src="https://s3-ap-northeast-1.amazonaws.com/hideyypub/jaws-ug-logo.png"><br>
</div>
</body>
</html>